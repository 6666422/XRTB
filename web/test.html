<html>
    <meta charset="utf-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <meta content="Bootstrap static html page for campaign administration."
    name="description">
    <meta content=
    "RTB,OpenRTB,JAVA,Advertising,real-time,campaign,administration" name=
    "keywords">
    <meta content="RTB4FREE" name="author">

    <title>RTB4FREE Admin</title>
    <link href=
    "https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css"
    rel="stylesheet">
    <link href=
    "https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css"
    rel="stylesheet">
    <script src=
    "https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script src=
    "https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <style type="text/css">
.bs-example{
        margin: 20px;
    }
    
    </style>
</head>

 <div class="bs-example">
        <h2>RTB4FREE Campaign Administrator Page</h2>

        <p>This page is used to manage sample campaigns. You need a login to
        actually manage your campaigns. If you already have made a login, type
        the name in here and push the 'Login' button.</p>

        <p>If you don't have a login, simply type the login name you would like
        and push 'Login' and a login will be made for you.</p>

        <p>Be aware that logins expire after 30 days, and your login (and
        campaigns) are deleted unless you login at least once within the 30 day
        period.</p><input id="p_username" placeholder="User name" size="40"
        type="text" value=""> <input id="p_login" onclick="doLogin()" type=
        "button" value="Login"      data-toggle="tooltip" data-placement="bottom" 
        data-original-title="Login to the portal with your login, if not present, it will be created for you
        the first time used."> 
        

        <div id="list-block">
            <hr>
            <input id="ad_domain" placeholder="ad id" size="40" type="text"
            value=""> <input onclick="doDyno();" type='button' value='+'
                data-toggle="tooltip" data-placement="bottom" 
        		data-original-title="This will create a new basic campaign for you to work with."> <br>

            <table id="addinput">
                <tr>
                    <th>Select Campaign to Edit</th>
                </tr>

                <tr id="row0">
                    <td></td>

                    <td></td>
                </tr>
            </table>
        </div>
        <hr>
        
<div id="selection">Selected: None</div>

        <ul class="nav nav-tabs" id="myTab">
            <li class="active">
                <a data-toggle="tab" href="#attributes">Attributes</a>
            </li>

            <li>
                <a data-toggle="tab" href="#templates">Templates</a>
            </li>

            <li>
                <a data-toggle="tab" href="#creatives">Creatives</a>
            </li>

            <li>
                <a data-toggle="tab" href="#constraints">Constraints</a>
            </li>
           <li>
                <a data-toggle="tab" href="#zstatus">Status</a>
            </li>
        </ul>

        <div class="tab-content" id="myTabContent">
            <div class="tab-pane fade in active" id="attributes">
            
<form role="form" method="get" action="#">
	<div class="form-group">
		<div class="col-lg-2">
			<label for="name">Ad Domain</label>
			<input type="text" class="form-control" id="adomain" placeholder="Enter ad domain" />
		</div>
	</div>
	<div class="form-group">
		<div class="col-lg-2">
			<label for="price">Price</label>
			<input type="text" class="form-control" id="price" placeholder="Price" />
		</div>
	</div>
	<div class="form-group">
		<div class="col-lg-2">
			<label for="adid">Ad Id</label>
			<input type="text" class="form-control" id="adid" placeholder="Ad ID" disabled=true />
		</div>
	</div>
	<div class="form-group">
		<div class="col-lg-2">
			<label for="startdate">Start Date</label>
			<input type="text" class="form-control" id="startdate" placeholder="Start date" />
		</div>
	</div>
	<div class="form-group">
		<div class="col-lg-2">
			<label for="enddate">End Date</label>
			<input type="text" class="form-control" id="enddate" placeholder="End date" />
		</div>
	</div>

<div class="checkbox">
	<label><input type="checkbox" /> Check me out</label>
</div>
<button type="submit" class="btn btn-default">Submit</button>
</form>
            </div>

            <div class="tab-pane fade" id="templates">
				<div class="form-group">
					<div class="col-lg-2">
						<label for="default">Default</label>
						<input type="text" class="form-control" id="default" placeholder="Default template" />
					</div>
					<br/>

				    <table id="addtemplate">
         				<th>Exchange</th>
         				<th>Template</th>
         					<tr id="row0">
            				<td>
              			 		<input type="text" id="p_new_exchange" size="20" name="p_new_x" value="" placeholder="exchange name" />
            				</td>
            				<td>
               					<input type="text" id="p_new_template" size="100" name="p_new" value="" placeholder="template is here" />
           			 		</td>
            				<td><a href="javascript:doDynoTemplate();">Add</a></td>
         				</tr>
					 </table>
				</div>
           	</div>

            <div class="tab-pane fade" id="creatives">

				    <table id="addcreative">
         				<th>Forward Url</th>
         				<th>Image Url</th>
         				<th>Imp ID</th>
         				<th>W</th>
         				<th>H</th>
         				<tr id="row0">
            				<td>
              			 		<input type="text" id="p_new_forward_url" size="50" name="p_new_x" value="" placeholder="Forward URL" />
            				</td>
            				<td>
               					<input type="text" id="p_new_image_url" size="50" name="p_new" value="" placeholder="Image URL" />
           			 		</td>
           			 		<td>
               					<input type="text" id="p_new_impid" size="10" name="p_new" value="" placeholder="Impression ID" />
           			 		</td>
           			 		<td>
               					<input type="text" id="p_new_w" size="5" name="p_new" value="" placeholder="width" />
           			 		</td>
           			           <td>
               					<input type="text" id="p_new_h" size="6" name="p_new" value="" placeholder="height" />
           			 		</td>
            				<td><a href="javascript:doDynoCreative();">Add</a></td>
         				</tr>
         				
					 </table>
                <p></p>
            </div>

            <div class="tab-pane fade" id="constraints">
 				<table id="addconstraints">
         				<th>Constraint Name</th>
         				<th>Operation</th>
         				<th>Constraint Value</th>
         				<th>Required</th>
         					<tr id="row0">
            				<td>
              			 		<input type="text" id="p_new_constraint" size="40" name="p_new_constraint" value="" placeholder="constraint" />
            				</td>
            				<td>
            				
<select class='form-control' id='opselect'>
<option value='EQUALS'>EQUALS</option>
<option value='NOT_EQUALS'>NOT_EQUALS</option>
<option value='MEMBER'>MEMBER</option>
<option value='NOT_MEMBER'>NOT_MEMBER</option>
<option value='INTERSECTS'>INTERSECTS</option>
<option value='NOT_INTERSECTS'>NOT_INTERSECTS</option>
<option value='INRANGE'>INRANGE</option>
<option value='NOT_INRANGE'>NOT_INRANGE</option>
<option value='LESS_THAN'>LESS_THAN</option>
<option value='LESS_THAN_EQUALS'>LESS_THAN_EQUALS</option>
<option value='GREATER_THAN'>GREATER_THAN</option>
<option value='GREATER_THAN_EQUALS'>GREATER_THAN_EQUALS</option>
<option value='DOMAIN'>DOMAIN</option>
<option value='NOT_DOMAIN'>NOT_DOMAIN</option>
</select>
            				</td>
            				<td>
               					<input type="text" id="p_new_value" size="40" name="p_new_values" value="" placeholder="values are here" />
           			 		</td>
           			 		<td><input type="CHECKBOX" id="p_required" checked></td>
           			 		
            				<td><a href="javascript:addNewConstraint();">Add</a></td>
         				</tr>
					 </table>
            </div>
            
            <div class="tab-pane fade" id="zstatus">
				<table id="addstatus" rules='all'>
                <tr>
                    <th>Campaign</th>
                    <th>Action</th>
                </tr>

                <tr id="row0">
                    <td></td>
                    <td></td>
                </tr>
            </table>
            </div>
          <input type="button" id="save_to_host" value="Upload Changes" onclick="saveChanges()"/>
        </div>
    </div>
</body>

<script>

$(document).ready(function(){
    $(".tip-top").tooltip({placement : 'top'});
    $(".tip-right").tooltip({placement : 'right'});
    $(".tip-bottom").tooltip({placement : 'bottom'});
    $(".tip-left").tooltip({ placement : 'left'});
});

$(document).ready(function(){
    $('[data-toggle="tooltip"]').tooltip();   
});


function saveChanges() {
	/*
	 * Get selected campaign name
	 * Get the running status of this campaign
	 * Load the attributes
	 * Load the templates
	 * Load the creatives
	 * Load the constraints
	 * Upload with jquery
	 * If running then print a message you have to stop/start for the system to take effect
	 */
	 
	 /* Attributes */
	 var camp = {};
 	 camp.adomain = document.getElementById("adomain").value;
     camp.price = document.getElementById("price").value;
     camp.adId = document.getElementById("adid").value = currentCampaign;
     d1 =  document.getElementById("startdate").value;
     d2 = document.getElementById("enddate").value;
     camp.dates = [];
     camp.dates.push(Number(d1));
     camp.dates.push(Number(d2));
     
     /* templates */
     camp.templates = {};
     camp.templates.default = document.getElementById("default").value;
     camp.templates.exchange = {};
     table = document.getElementById("addtemplate");
     rows = table.rows;
     for (i = 2; i < rows.length; i++) {
     	a = rows[i].cells[0].children[0].value;
     	b = rows[i].cells[1].children[0].value;
     	camp.templates.exchange[a] = b;
     }
     
     /* creatives */
     creatives = [];
     table = document.getElementById("addcreative");
     rows = table.rows;
     for (i = 2; i < rows.length; i++) {
     	a = rows[i].cells[0].children[0].value;
     	b = rows[i].cells[1].children[0].value;
     	c = rows[i].cells[2].children[0].value;
     	d = rows[i].cells[3].children[0].value;
     	e = rows[i].cells[4].children[0].value;
     	obj = {};
     	obj.forwardurl = a;
     	obj.imageurl = b;
     	obj.impid = c;
     	obj.w = d;
     	obj.h = e;
     	creatives.push(obj);
     }
     camp.creatives = creatives;
	 
	 /* constraints */
	 attributes = [];
	      table = document.getElementById("addconstraints");
     rows = table.rows;
     for (i = 2; i < rows.length; i++) {
     	a = rows[i].cells[0].children[0].value;
     	a = a.split(".");
     	
     	b = rows[i].cells[1].children[0].value;
     	c = eval(rows[i].cells[2].children[0].value);
     	d = rows[i].cells[3].children[0].checked;
     	obj = {};
     	obj.bidRequestValues = a;
     	obj.op = b;
     	obj.value = c;
     	obj.required = d;
     	attributes.push(obj);
     }
     camp.attributes = attributes;
	 
	 console.log(JSON.stringify(camp,null,2));
	 

      ///////////////////
            data = {
                command: 'updateampaign',
                username: document.getElementById('p_username').value,
                campaign: value
            };
        $.ajax({
         type: 'POST',
         url:'ajax',
         data: JSON.stringify(data),
         dataType: 'json',
         success: function(data, textStatus, request){
           if (request.status == 204) {
            text = "";
           } else {
            text = request.responseText;
            data = JSON.parse(text);
            if (data.campaigns != null) {
                camps = data.campaigns;
            }
            message = data.message;
            text = JSON.stringify(data,null,2);
            console.log("-----------------");
            console.log(text);
           }
           if (error)
                alert(message);
           else
           		alert("Update succeeded\nIf this campaign is running already, please stop/start it now.");
               
         },
         error: function (request, textStatus, errorThrown) {
           alert("Error: " + request.responseText);
         }});
        //////////////////
}

       function DynamicTable(tableId, cells) {
           this.tableId = tableId;
           this.cells = cells;
           this.headers = document.getElementById(tableId).rows.length;
       }
       
       DynamicTable.prototype.clear = function() {
        	var table = document.getElementById(this.tableId);
			while(table.rows.length>this.headers) {
               table.deleteRow(this.headers);
            }
        }
        
        DynamicTable.prototype.macroSubs = function(line,a,rowCount,idr,col) {
        	line = line.replace(/SUB_VALUE/g, a);
            line = line.replace(/SUB_ID/g, this.tableId+":"+col+":"+rowCount);
            line = line.replace(/ROW_ID/g, idr);    
            return line;
        }
        
        DynamicTable.prototype.remove = function(what) {
         	var id=  this.tableId;
            var table = document.getElementById(id);
            for (var i = 0; i < table.rows.length; i++) {
                           row = table.rows[i];
                           id = row.getAttribute("id");
                           if (id == what) {
                               table.deleteRow(i);
                               return;
                           }
                       }
        }
        
         DynamicTable.prototype.add = function(values) {
        		   var id=  this.tableId;
                   var table = document.getElementById(id);
                   var rowCount = table.rows.length + 1;
                   var row = table.insertRow(-1);
                   var label = id + rowCount;
                   row.setAttribute("id", id + rowCount);
                       
                   for (var i = 0; i < this.cells.length; i++) {
                   		var cell = row.insertCell(i);
                        cell.innerHTML = this.macroSubs(this.cells[i],values[i],rowCount,id+rowCount,i);
                       	obj = document.getElementById(this.tableId+":"+i+":"+rowCount);
                       	
                       	if (obj != null) {
                       		if (obj.tagName == "SELECT") {
                       			for(var j=0; j < obj.options.length; j++) {           			
    								if(obj.options[j].value === values[i]) {
      									obj.selectedIndex = j;
      									break;
   									 }
  								}
                       		} else {
                       			if (obj.type == "checkbox") {
                       				obj.checked = values[i];
                       			} else
                       		 		obj.value = values[i];
                       		 }
                       	}
                       		 
                        console.log(cell.innerHTML);
                   }
                   return label;
           }
           
       function doLogin() {
        clearFields();
        
        userName = name = document.getElementById('p_username').value;
        if (name == "")
        	return;
        	
        data = {
        command: 'login',
        username: name
        };

        $.ajax({
         type: 'POST',
         url:'ajax',
         data: JSON.stringify(data),
         dataType: 'json',
         success: function(data, textStatus, request){
           if (request.status == 204) {
            text = "";
           } else {
            text = request.responseText;
            data = JSON.parse(text);
            
            camps = data.campaigns;
            message = data.message;
            running = data.running;
            text = JSON.stringify(data,null,2);
            
         
           }
         //  console.log("data = " + JSON.stringify(camps,null,2));
           if (message != null && message != "")
                alert(message);
               
           for (i=0;i<camps.length;i++) {
                campaign = camps[i];
                dyno.add([campaign.adId,'']);
                value = campStatus.add([campaign.adId,'']);
                console.log("ADDED: " + value);
           }
           updateStatus(running);

         },
         error: function (request, textStatus, errorThrown) {
           alert("Error: " + request.responseText);
         }});
        }     
        
        function doDyno() {
            var newName = document.getElementById("ad_domain").value;

            if (newName == '') {
                alert("Error: Can't have a blank ad domain");
                return;
            }
            
            ///////////////////////////////////////////////////
               data = {
                    command: 'stub',
                username: document.getElementById('p_username').value,
                campaign: newName
            };

        $.ajax({
         type: 'POST',
         url:'ajax',
         data: JSON.stringify(data),
         dataType: 'json',
         success: function(data, textStatus, request){
           if (request.status == 204) {
            text = "";
           } else {
            text = request.responseText;
            data = JSON.parse(text);
            
            camp = data.campaign;
            camps.push(camp);
            message = data.message;
            text = JSON.stringify(data,null,2);
         
           }
         //  console.log("data = " + JSON.stringify(camps,null,2));
           if (message != null && message != "")
                alert(message);
               
            dyno.add([camp.adId,'']);
            document.getElementById("ad_domain").value = "";
           

         },
         error: function (request, textStatus, errorThrown) {
           alert("Error: " + request.responseText);
         }});
            
            ////////////////////////////////////////////////////
            
            
         }
         
         function doDynoCreative() {
         	var fURL = document.getElementById("p_new_forward_url");
         	var iURL = document.getElementById("p_new_image_url");
         	var impid = document.getElementById("p_new_impid");
         	var w = document.getElementById("p_new_w");
         	var h = document.getElementById("p_new_h");
         	
			creativeDyno.add([fURL.value,iURL.value,impid.value,w.value,h.value,'']);
			fURL.value =  iURL.value = impid.value = w.value = h.value = ''
         }
         
function deleteCreative() {
/** Doesn't do anything */
}
   
/*
 * iterate through the row of the table, when you find one in the list of running
 * update the start stop button
 */
       
function updateStatus(running) {
    /** 
      * Update the status pane
      */
	table = document.getElementById("addstatus");
	rows = table.rows;
	for (var i = 2; i < rows.length; i++) {
		row = rows[i];
		cell = row.cells[0];
		label = cell.innerText;
		cell = row.cells[1];
		button = cell.children[0];
		text = button.value;
		button.style.background = "#A9A9A9";
		for (var j = 0; j<running.length;j++) {
			if (label == running[j]) {
				button.value = "Stop";
				button.style.background='#7FFF00';
			}
		}
		console.log(text);
	}
	
	/*
	 * Update the main pane 
	 */
	 table = document.getElementById("addinput");
	 rows = table.rows;
	 for (var i = 2; i < rows.length; i++) {
	 	row = rows[i];
	 	cell = row.cells[0];
	 	button = cell.children[0];
	 	label = button.value;
	 	button.style.background = "#A9A9A9";
	 	for (var j = 0; j<running.length;j++) {
			if (label == running[j]) {
				button.style.background='#7FFF00';
			}
		}
	 }
}

function getCampaign(id) {
	for (var i = 0; i < camps.length; i++) {
		var camp = camps[i];
		if (camp.adId == id)
			return camp;
	}
	return null;
}
        
function clearFields() {
	dyno.clear();
	tdyno.clear();
	campStatus.clear();
	cdyno.clear();
	creativeDyno.clear();
}
           

function deleteCampaign(what,id) {
	var parts = id.split(":");
	var celln = Number(parts[1])-1; 
	celln = parts[0] + ":" + celln +":" + parts[2];
	var value = document.getElementById(celln).value;
	console.log("REMOVE VAL: " + value);
	//////////////////
      ///////////////////
               data = {
                    command: 'deletecampaign',
                username: document.getElementById('p_username').value,
                campaign: value
            };
        $.ajax({
         type: 'POST',
         url:'ajax',
         data: JSON.stringify(data),
         dataType: 'json',
         success: function(data, textStatus, request){
           if (request.status == 204) {
            text = "";
           } else {
            text = request.responseText;
            data = JSON.parse(text);
            if (data.campaigns != null) {
                camps = data.campaigns;
            }
            message = data.message;
            text = JSON.stringify(data,null,2);
            console.log("-----------------");
            console.log(text);
           }
           if (message != null && message != "")
                alert(message);
               
            dyno.remove(what);
         },
         error: function (request, textStatus, errorThrown) {
           alert("Error: " + request.responseText);
         }});
        //////////////////
	//////////////////
}

function processCampaign(what) {
	var x = document.getElementById(what).value;
	console.log("PROCESS WHAT: " + x);
	
	document.getElementById("selection").innerHTML = "Selected: " + x;
	disableTabs(false);
		
	for(var i=0;i<camps.length;i++) {
        var c = camps[i];
        if (c.adId == x) {
            document.getElementById("adomain").value = c.adomain;
            document.getElementById("price").value = c.price;
            document.getElementById("adid").value = c.adId;
            document.getElementById("startdate").value = c.date[0];
            document.getElementById("enddate").value = c.date[1];
            
            document.getElementById("default").value = c.template.default;
            
            var exchange = c.template.exchange;
            tdyno.clear();
            for (var p in exchange) {
    			if( exchange.hasOwnProperty(p) ) {
    				tdyno.add([p,exchange[p],'']);
    			} 
  			}  
  			
  			cdyno.clear();
  			for (i = 0; i < c.attributes.length; i++) {
  				var attribute = c.attributes[i];
  				var left = "";
  				for (j = 0; j < attribute.bidRequestValues.length;j++) {
  					left += attribute.bidRequestValues[j];
  					if (j+1 < attribute.bidRequestValues.length)
  						left += ".";
  				}
  				var op = attribute.op;
  				var right = JSON.stringify(attribute.value);
  				var req = c.required;
  				cdyno.add([left,op,right,req,""]);
  				console.log(JSON.stringify(attribute,null,2));
  			}       
  			
  			creativeDyno.clear();    
  			for (i = 0; i< c.creatives.length; i++) {
  				creative = c.creatives[i];
  				
  				creativeDyno.add([creative.forwardurl,creative.imageurl,creative.impid,creative.w,creative.h,'']);
  			} 
  			
  			currentCampaign = c.adId;
  			              
        }
    }
}

function deleteTemplateRow(what) {
	console.log("DELETE WHAT: " + what);
	x = document.getElementById(what);
	console.log("val = " + x.value);
	tdyno.remove(what);
}

function deleteConstraintRow(what) {
	console.log("DELETE WHAT: " + what);
	x = document.getElementById(what);
	console.log("val = " + x.value);
	cdyno.remove(what);
}

function addTemplateRow(id1, id2) {
	o = document.getElementById(id1);
	vals = [];
	vals.push(o.value);
	o.value = "";
	o = document.getElementById(id2);
	vals.push(o.value);
	o.value = "";
	vals.push("");
	tdyno.add(vals); 
}

function addNewConstraint() {
	a = document.getElementById("p_new_constraint");
	op = document.getElementById("opselect");
	b = document.getElementById("p_new_value");
	req = document.getElementById("p_required").checked;
	vals = [];
	vals.push(a.value);
	vals.push(op.value);
	vals.push(b.value);
	vals.push(req);
	vals.push("");
	cdyno.add(vals);
}

function startStop(rowId) {
	console.log("A="+rowId);
	row = document.getElementById(rowId);
	cell = row.cells[0];
	a = cell.textContent;
	cell = row.cells[1];
	inp = cell.children[0];
	b = inp.value;
	campaign = getCampaign(a);
	msg = {};
	if (b == 'Start') {
		inp.value='Pending...';
		msg.command = 'startcampaign';
		msg.id = campaign.adId;
	} else {
		msg.command = 'stopcampaign';
        msg.id = campaign.adId;
        inp.value = "Start"
	}
	////////////////////
        $.ajax({
         type: 'POST',
         url:'ajax',
         data: JSON.stringify(msg),
         dataType: 'json',
         success: function(data, textStatus, request){
           if (request.status == 204) {
            text = "";
           } else {
            text = request.responseText;
            data = JSON.parse(text);
            message = data.message;
            text = JSON.stringify(data,null,2);
            console.log("-----------------");
            console.log(text);
           }
           if (data.error)
                alert(message);
               
           updateStatus(data.running);
         },
         error: function (request, textStatus, errorThrown) {
           alert("Error: " + request.responseText);
         }});
	////////////////////
}

camps = [];

cells = [];
cells.push( "<input type='button' onclick='processCampaign(\"SUB_ID\")' value='SUB_VALUE' id='SUB_ID' class='primary-btn col-xs-11 text-left' style=\"width:280px\">");
cells.push( "<a href=\"javascript:deleteCampaign('ROW_ID','SUB_ID');\">Del<\/a>");
      
dyno = new DynamicTable("addinput",cells);

zcells = [];
zcells.push('SUB_VALUE')
zcells.push("<input type='button' onclick='startStop(\"ROW_ID\")' value='Start' id='ROW_ID' class='primary-btn col-xs-11 text-left' style=\"width:100px\"/>");
campStatus = new DynamicTable("addstatus",zcells);


////////////////////////////////////

xcells = [];
xcells.push("<input type='text' id='SUB_ID' size='20'value='' placeholder='exchange name' />");
xcells.push("<input type='text' id='SUB_ID' size='100' value='' placeholder='template is here' />");
xcells.push("<a href=\"javascript:deleteTemplateRow('ROW_ID');\">Del</a></td>");

tdyno = new DynamicTable("addtemplate",xcells);


crCells = []
crCells.push("<input type='text' id='SUB_ID' size='50' value='' placeholder='Forward URL' />");
crCells.push("<input type='text' id='SUB_ID' size='50' value='' placeholder='Image URL' />")
crCells.push("<input type='text' id='SUB_ID' size='10' value='' placeholder='Impression ID' />");
crCells.push("<input type='text' id='SUB_ID' size='6' value='' placeholder='width' />");
crCells.push("<input type='text' id='SUB_ID' size='6' value='' placeholder='height' />");
crCells.push("<a href=\"javascript:deleteCreative('ROW_ID');\">Del</a></td>");
creativeDyno = new DynamicTable("addcreative",crCells);


ccells = [];

ccells.push("<input type='text' id='SUB_ID' size='40'value='' placeholder='constraint name' />")
ccells.push("<select class='form-control' id='SUB_ID'>"+
"<option value='EQUALS'>EQUALS</option>"+
"<option value='NOT_EQUALS'>NOT_EQUALS</option>"+
"<option value='MEMBER'>MEMBER</option>"+
"<option value='NOT_MEMBER'>NOT_MEMBER</option>"+
"<option value='INTERSECTS'>INTERSECTS</option>"+
"<option value='NOT_INTERSECTS'>NOT_INTERSECTS</option>"+
"<option value='INRANGE'>INRANGE</option>"+
"<option value='NOT_INRANGE'>NOT_INRANGE</option>"+
"<option value='LESS_THAN'>LESS_THAN</option>"+
"<option value='LESS_THAN_EQUALS'>LESS_THAN_EQUALS</option>"+
"<option value='GREATER_THAN'>GREATER_THAN</option>"+
"<option value='GREATER_THAN_EQUALS'>GREATER_THAN_EQUALS</option>"+
"<option value='DOMAIN'>DOMAIN</option>"+
"<option value='NOT_DOMAIN'>NOT_DOMAIN</option>"+
"</select>")
ccells.push("<input type='text' id='SUB_ID' size='40'value='' placeholder='constraint value' />")
ccells.push("<input type='checkbox' id='SUB_ID' checked>");
ccells.push("<a href=\"javascript:deleteConstraintRow('ROW_ID');\">Del</a></td>");

cdyno = new DynamicTable("addconstraints",ccells);


function disableTabs(mode)  {
	disabler(document.getElementById("myTabContent"),mode);
}

function disabler(el,mode) {
	try {
		el.disabled = mode
	} catch(E) {}
	if (el.childNodes && el.childNodes.length > 0) {
		for (var x = 0; x < el.childNodes.length; x++) {
			if (el.childNodes[x].id != 'zstatus')
				disabler(el.childNodes[x],mode);
		}
	}
}

userName = null;
currentCampaign = null;
disableTabs(true);
</script>

</html>